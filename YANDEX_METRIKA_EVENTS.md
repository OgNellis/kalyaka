# üìä –°–æ–±—ã—Ç–∏—è –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è Kalyaka

## üéØ –û–±–∑–æ—Ä

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Kalyaka –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å–æ–±—ã—Ç–∏—è –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π. –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å ID —Å—á–µ—Ç—á–∏–∫–∞ `104144056` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç–æ–¥ `reachGoal`.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã TypeScript**

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/types/global.d.ts` —Å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `ym`:

```typescript
declare global {
  interface Window {
    ym: (counterId: number, method: string, target: string, params?: any) => void;
  }
  
  const ym: (counterId: number, method: string, target: string, params?: any) => void;
}
```

### **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π**

–í–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `ym`:

```typescript
if (typeof ym !== 'undefined') {
  ym(104144056, 'reachGoal', 'event_name');
}
```

## üìà –°–æ–±—ã—Ç–∏—è

### **1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**
- **–°–æ–±—ã—Ç–∏–µ**: `image_download`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `TopToolbar`
- **–ö–æ–¥**: `ym(104144056, 'reachGoal', 'image_download')`

### **2. –û—á–∏—Å—Ç–∫–∞ —Ö–æ–ª—Å—Ç–∞**
- **–°–æ–±—ã—Ç–∏–µ**: `clear_button`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å"
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `TopToolbar`
- **–ö–æ–¥**: `ym(104144056, 'reachGoal', 'clear_button')`

### **3. –°–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞**
- **–°–æ–±—ã—Ç–∏–µ**: `change_color`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ö–ª–∏–∫ –Ω–∞ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É —Ü–≤–µ—Ç–∞
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `ColorToolbar`
- **–ö–æ–¥**: `ym(104144056, 'reachGoal', 'change_color')`

### **4. –°–º–µ–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–∏—Å—Ç–∏**
- **–°–æ–±—ã—Ç–∏–µ**: `change_size`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ö–ª–∏–∫ –Ω–∞ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É —Ä–∞–∑–º–µ—Ä–∞ –∫–∏—Å—Ç–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `BrushToolbar`
- **–ö–æ–¥**: `ym(104144056, 'reachGoal', 'change_size')`

### **5. –û—Ç–º–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è**
- **–°–æ–±—ã—Ç–∏–µ**: `cancel_button`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã (‚Ü∂)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `UndoButton`
- **–ö–æ–¥**: `ym(104144056, 'reachGoal', 'cancel_button')`

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### **TopToolbar.tsx**
```typescript
const handleSave = () => {
  // ... –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  if (typeof ym !== 'undefined') {
    ym(104144056, 'reachGoal', 'image_download');
  }
};

const handleClear = () => {
  clearCanvasEvent();
  if (typeof ym !== 'undefined') {
    ym(104144056, 'reachGoal', 'clear_button');
  }
};
```

### **ColorToolbar.tsx**
```typescript
const handleColorChange = (colorValue: string) => {
  setColorEvent(colorValue);
  if (typeof ym !== 'undefined') {
    ym(104144056, 'reachGoal', 'change_color');
  }
};
```

### **BrushToolbar.tsx**
```typescript
const handleBrushSizeChange = (size: number) => {
  setBrushSizeEvent(size);
  if (typeof ym !== 'undefined') {
    ym(104144056, 'reachGoal', 'change_size');
  }
};
```

### **UndoButton.tsx**
```typescript
const handleUndo = () => {
  if (canUndo) {
    undoEvent();
    if (typeof ym !== 'undefined') {
      ym(104144056, 'reachGoal', 'cancel_button');
    }
  }
};
```

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### **–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è:**

1. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
   - –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã –∫–∏—Å—Ç–µ–π
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π —Ä–∏—Å—É–Ω–∫–æ–≤

2. **–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**:
   - –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ç–º–µ–Ω—ã
   - –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏

3. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è**:
   - –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ä–∏—Å—É–Ω–∫–∏
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**

- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: `image_download` / –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: `change_color` + `change_size` / —Å–µ—Å—Å–∏—è
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–º–µ–Ω—ã**: `cancel_button` / —Å–µ—Å—Å–∏—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏**: `clear_button` / —Å–µ—Å—Å–∏—è

## üîç –û—Ç–ª–∞–¥–∫–∞

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ–±—ã—Ç–∏–π:**

1. **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ ym
console.log(typeof ym); // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 'function'

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–±—ã—Ç–∏—è
ym(104144056, 'reachGoal', 'test_event');
```

2. **–í –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–µ:**
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "–û—Ç—á–µ—Ç—ã" ‚Üí "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã" ‚Üí "–ö–æ–Ω–≤–µ—Ä—Å–∏–∏"
   - –ù–∞–π—Ç–∏ —Ü–µ–ª–∏ —Å –∏–º–µ–Ω–∞–º–∏ —Å–æ–±—ã—Ç–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É —Å–æ–±—ã—Ç–∏—é

3. **–í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
   - –û—Ç–∫—Ä—ã—Ç—å –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫—É –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
```typescript
ym(104144056, 'reachGoal', 'change_color', {
  color: colorValue,
  timestamp: Date.now()
});
```

2. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏:**
```typescript
ym(104144056, 'reachGoal', 'session_duration', {
  duration: sessionTime
});
```

3. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```typescript
ym(104144056, 'reachGoal', 'feature_used', {
  feature: 'new_brush',
  variant: 'A'
});
```

## üì± –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ **–í—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã** - —Å–æ–±—ã—Ç–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ, –≥–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞
- ‚úÖ **–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ touch-—Å–æ–±—ã—Ç–∏–π
- ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **SSR/SSG** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è** - –≤—Å–µ –≤—ã–∑–æ–≤—ã `ym` –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- **Graceful degradation** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏
- **–ù–µ—Ç —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–æ–±—ã—Ç–∏—è
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ GDPR** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–µ
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ A/B —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–µ–¥–∏—Ç–µ –ª–æ–≥ –≤—Å–µ—Ö –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π
